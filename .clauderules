# AI First Workspace - Правила для Claude Code

## Информация о workspace

**Владелец:** flutbetkuz
**GitHub:** https://github.com/flutbetkuz/workspace
**Структура:** Централизованное управление отделами и проектами

## Структура workspace

```
workspace/
├── Strategy/      - Стратегическое планирование, бизнес-модель
├── Docs/          - Документация проектов и процессов
├── Marketing/     - Маркетинговые материалы и кампании
├── Operations/    - Операционные процессы, найм, метрики
├── Projects/      - Информация о проектах (код в отдельных репо)
└── scripts/       - Утилиты и автоматизация
```

## Проекты

### Paradox Therapy Bot
- **Репозиторий:** https://github.com/flutbetkuz/paradox-therapy-bot
- **VPS:** запущен в production (Docker)
- **Описание:** Telegram-бот для рефлексии без давления и геймификации
- **Технологии:** Python, aiogram, SQLite, APScheduler, Docker, OpenRouter API
- **Статус:** MVP в production, Telegram Payments не подключены

## Правила работы

### Общие принципы
- Поддерживать чистую структуру папок
- Использовать понятные названия файлов
- Документировать важные решения
- Связывать информацию между отделами

### Управление файлами
- README.md в каждой папке для описания содержимого
- Markdown для документации
- Ясная навигация между разделами

### Работа с AI
- Быть проактивным в предложениях
- Задавать уточняющие вопросы
- Предоставлять контекст для рекомендаций
- Создавать перекрестные ссылки
- **Минимизировать использование токенов:**
  - Использовать специализированные инструменты вместо прямого чтения больших файлов
  - Предпочитать Grep/Glob вместо чтения всех файлов
  - Использовать Task tool с Explore agent для исследования кодовой базы
  - Читать только релевантные части файлов (offset/limit)
  - Избегать дублирования информации в ответах

### Контекст проектов
Когда работаешь с конкретным проектом:
- Читай его .clauderules для специфичных правил
- Следуй принципам проекта
- Учитывай технологический стек

### Agent Team Workflow
При работе над проектами:

1. **Всегда запускай Agent Team** для нетривиальных задач
   - Используй TeamCreate для создания команды агентов
   - Распределяй задачи между специализированными агентами

2. **План работ с обязательной проверкой:**
   - Сначала составляется детальный план работ
   - План проверяется специальным агентом-ревьюером

3. **Агент для проверок (Code Review Agent):**
   - Проверяет архитектуру и код на отсутствие оверинжиниринга
   - Требует простой и понятный код
   - Минимальные комментарии (только где необходимо)
   - Код должен быть self-explanatory

4. **Цикл исправлений:**
   - Ошибки, найденные агентом для проверок, исправляются
   - Цикл повторяется до полного устранения замечаний

5. **Проверка безопасности:**
   - Обязательная security проверка кода
   - Проверка на уязвимости (XSS, SQL injection, command injection и др.)
   - Проверка на утечку конфиденциальных данных

### Деплой (VPS + Docker)

- ✅ При изменении `.py` файлов — пересобирать образ: `docker compose up --build -d`
- ⛔ `docker compose restart` НЕ подхватывает изменения кода (образ не обновляется)
- ✅ `.env` подхватывается без rebuild — можно менять токены/модели без пересборки
- ✅ Только `./data` монтируется как volume — остальное бакается в образ

### Git workflow
- Meaningful commit messages на английском
- Не коммитить конфиденциальную информацию (.env, токены)
- Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>

## Работа со скилами (Claude Code Skills)

### Что такое скилы

Claude Code Skills — расширения, добавляющие новые slash-команды (`/skill-name`). Скил инжектируется в системный промпт как контекст и описывает специализированную задачу.

**Важно:** Скилы ≠ инструменты (Tools). Скилы — это инструкции в системном промпте.

### Установленные скилы

Скилы установлены глобально в `~/.claude/skills/` на VPS.

| Скил | Что делает |
|------|-----------|
| `agent-deck` | Дочерние Claude-сессии через CLI; иерархия "родитель→дети" |
| `codex-review` | Кросс-агентное review: Claude пишет, Codex (GPT) ревьюит |
| `ssh-remote-connection` | SSH к удалённому серверу, Docker, логи |
| `scrapedo-web-scraper` | Скрапинг с обходом Cloudflare/CAPTCHA; авто при ошибках WebFetch |
| `docx-contracts` | Заполняет `.docx` шаблоны данными из контекста |
| `genome-analizer` | Анализирует VCF-файлы генома |
| `yandex-wordstat` | Анализ поискового спроса, SEO, семантическое ядро |
| `fal-ai-image` | Генерация изображений через fal.ai |
| `humanizer` | Очистка текстов от AI-паттернов, см. правила ниже |

**Репозитории скилов:**
- https://github.com/artwist-polyakov/polyakov-claude-skills (8 скилов)
- https://github.com/blader/humanizer (humanizer)

### Использование скилов

```
/codex-review            # Code review текущего кода
/ssh-remote-connection   # Работа с VPS
/humanizer               # Переписать тексты без AI-паттернов
```

### Скилы в агент-режиме

Встроенные агенты (Explore, Plan, general-purpose) НЕ наследуют скилы.
Решение: кастомный агент в `.claude/agents/` с явным `skills:` полем.

```markdown
---
name: code-reviewer
description: Агент для углублённого code review.
tools: Read, Glob, Grep, Bash
skills:
  - codex-review
---
```

## Хуманайзер (humanizer)

При написании или редактировании любых пользовательских текстов (интерфейсы, боты, сообщения, описания) — использовать скил `/humanizer`.

```
/humanizer
[вставить текст для обработки]
```

Скил установлен в `~/.claude/skills/humanizer`. Репозиторий: https://github.com/blader/humanizer

